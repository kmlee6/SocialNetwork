<nav class="navbar flex-column navbar-dark bg-dark text-white sticky-top">
	<ul class="nav nav-pills nav-fill">
		<li style="cursor: pointer" class="nav-item" (mouseover)="hover6=true" (mouseleave)="hover6=false">
			<div class="nav-link" [style.color]="hover6?'green':'white'" (click)='reloadData()'>Flush Data</div>
		</li>
		<li style="cursor: pointer" class="nav-item" (click)="navigate(1)" (mouseover)="hover0=true" (mouseleave)="hover0=false">
			<div class="nav-link" [style.color]="hover0?'green':'white'">About</div>
		</li>
		<li style="cursor: pointer" class="nav-item" (click)="navigate(2)" (mouseover)="hover1=true" (mouseleave)="hover1=false">
			<div class="nav-link" [style.color]="hover1?'green':'white'">Manage Events</div>
		</li>
		<li style="cursor: pointer" class="nav-item" (click)="navigate(3)" (mouseover)="hover2=true" (mouseleave)="hover2=false">
			<div class="nav-link" [style.color]="hover2?'green':'white'">Manage Users</div>
		</li>
		<li style="cursor: pointer" class="nav-item" (click)="navigate(4)" (mouseover)="hover4=true" (mouseleave)="hover4=false">
			<div class="nav-link" [style.color]="hover4?'green':'white'">Obtain Events</div>
		</li>
		<li style="cursor: pointer" class="nav-item" [style.display]="loginFlag?'unset':'none'" (click)="logout()" (mouseover)="hover5=true" (mouseleave)="hover5=false">
			<div class="nav-link" [style.color]="hover5?'green':'white'">Logout</div>
		</li>
		<li class="nav-item bg-light" [style.display]="loginFlag?'unset':'none'"><div class="nav-link font-weight-bold" style="color: rgb(75, 207, 58) ">Admin</div></li>
	</ul>
</nav>

<div [style.display]="first?'unset':'none'">
	home
</div>

<div [style.display]="show_f_d_v?'unset':'none'">
<div style="padding: 0 20% 0 20%;">
	About
	<div>Workload<br>
		<ul>
			<li>Frontend</li>
				<ul>
					<li>User: </li>
					<li>Admin: KONG Sai Kwan</li>
				</ul>
			<li>Backend</li>
				<ul>
					<li>LEE Ka Man </li>
				</ul>
		</ul>
	</div>

	<div>
		<p>For User Action:</p>
			<table>
				<tr>
					<th style="width: 100px; text-align: center;">Sorting</th>
					<td >Once the user click on the header of the field, it will sort the table with the clicked list ascendingly. Then, if the user click again, it will sort in descending. If the user would like to unsort the list, he can click on the header again to return the original order of the table.</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">Searching</th>
					<td>The user enters the keywords, chooses which field is searched and presses the “Search!” button. The result table will be shown as the same layout of the table listed all events.</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">Displaying details and Comment</th>
					<td>Users can click anywhere on the row of a single event in order to display the details of the event, see other comment and comment it. The comment table will clearly show the username of who commented, the date when he commented and the content of the comment.  Without reloading, the comment will automatically post on the comment table automatically after pressing “Post!”</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">Add events into a list of favorite events</th>
					<td>There is a button “+” as one of the column of each event. User can press the button “+” in order to add events into the list of favorite events. </td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">Username and Logout</th>
					<td>The username is always shown on the top right of the screen once the user has logged in. Also there is a “Logout” button for user to press to log out.</td>
				</tr>
			</table>
	</div>

	<div>
		<p>For admin action: the admin mode can be accessed via “localhost:4200/admin/0”.</p>
		<table >
				<tr>
					<th style="width: 100px; text-align: center;">Flush data</th>
					<td >the admin can reload data from the online dataset by pressing “reload” button.</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">CRUD event data</th>
					<td>
						<ul>
							<li>Create: There is a creating event bar on the “Manage Events”. Admin need to input all required information of the event and press “Create”   button to insert the new record to the database.</li>
							<li>Update: The details of the event will be shown when the cursor is on the program name of the event. Admin can change any field of the event and data in local database and displaying will be changed after pressing “Save”.</li>
							<li>Delete: There is a button “X” as one of the column of each event. Admin can press the button “X” in order to delete the event.</li>
						</ul>
					</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">CRUD user data</th>
					<td>
						<ul>
							<li>Create: Similarly, there is a create user bar on the “Manage Users”. Admin need to input the username and password, and press “Create”   button to insert the new record to the database.
							</li>
							<li>Update: Similar to the event data. The details of the event will be shown when the cursor is on the username of the user.
							</li>
							<li>Delete: Similar to the event data. Besides, after deleting a user, the comment replied by the user will be deleted both on the page and in the database, and the user’s favorite list will not be shown.</li>
						</ul>
					</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">Obtain event data from CSV</th>
					<td>Admin can choose which CSV file to upload by pressing “Choose file”. There is simple instructions below to show the data format. 
					</td>
				</tr>
				<tr>
					<th style="width: 100px; text-align: center;">Logout</th>
					<td>There is a “Logout” button for admin to press to log out.</td>
				</tr>
			</table>
			<p>For storing data: Pre-processing have been done on the given data because there is some &#123; &#125; and non-ASCII character are included in the primary data. Therefore, before parsing by JSON, we have to remove those from the original data in the beginning. </p>
	</div>
	<div>
		<p>Design of data schemas and models of the database: There is three schemas.<br>First, account schemas. In the account schemas, it consists of uid, name, password and bookmark. The uid is the user id, which is a unique number and it assigned to each user automatically. The name is the username that is unique. The bookmark is an array of user’s favorite events.<br>Second, event schemas. In the event schemas, it consists of eid, name, type, datetime, location and quota. The eid is the event id, which is a unique number and it assigned to each event automatically.<br>Third, comment schemas. In the comment schemas, it consists of cid, uid, eid, time and comment. The cid is the comment id, which is a unique number and it assigned to each user automatically. The comment is stored in a string.</p>
		<p style="color: green; font-size: 20px; font-weight: bold;">We have read the article carefully.</p>
	</div>
</div>
</div>

<div [style.display]="show_m_e_v?'unset':'none'">
	<table class="table table-striped table-bordered table-dark table-responsive-sm" style="margin-bottom: 137px">
		<thead>
			<tr>
				<th>ID</th>
				<th>Program Name</th>
				<th>Datetime</th>
				<th>quota</th>
				<th>Location</th>
				<th>Type</th>
				<th>Delete</th>
			</tr>
		</thead>
		<tbody>
				<tr *ngFor="let event of eventsList; let i = index">
					<td>
						{{event.eid}}
					</td>
					<td (mouseover)='hoverIndex=i' (mouseleave)='hoverIndex=-1'>
						{{event.name}}
						<div class='dropdown' [style.display]='hoverIndex==i?"block":"none"'>
							<table>
								<tr>
									<td>
										<input value='{{event.name}}'>
									</td>
								</tr>
								<tr>
									<td>
										<input value='{{event.datetime}}'>
									</td>
								</tr>
								<tr>
									<td>
										<input value='{{event.quota}}'>
									</td>
								</tr>
								<tr>
									<td>
										<input value='{{event.location}}'>
									</td>
								</tr>
								<tr>
									<td>
										<input value='{{event.type}}'>
									</td>
								</tr>
								<tr>
									<td (click)='updateEvent($event, i)' style='background: green'>
										Save
									</td>
								</tr>
							</table>
						</div>
					</td>
					<td>
						{{event.datetime}}
					</td>
					<td>
						{{event.quota}}
					</td>
					<td>
						{{event.location}}
					</td>
					<td>
						{{event.type}}
					</td>
					<td>
						<button class="btn btn-sm" (click)='deleteEvent(i)'>X</button>
					</td>
				</tr>
			</tbody>
	</table>
	<table class="table table-striped table-bordered table-light table-responsive-sm fixed-bottom" style="margin-bottom: 0;">
		<thead>
			<tr>
				<th>Program Name</th>
				<th>Datetime</th>
				<th>quota</th>
				<th>Location</th>
				<th>Type</th>
				<th>Create</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>
					<textarea class='form-control' placeholder="Event Name"></textarea>
				</td>
				<td>
					<textarea class='form-control' placeholder="Event Datetime"></textarea>
				</td>
				<td>
					<textarea class='form-control' placeholder="Event quota"></textarea>
				</td>
				<td>
					<textarea class='form-control' placeholder="Event Location"></textarea>
				</td>
				<td>
					<textarea class='form-control' placeholder="Event Type"></textarea>
				</td>
				<td>
					<button class="btn btn-sm" (click)='pushEvent($event)'>Create</button>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<div [style.display]="show_m_u_v?'unset':'none'">
	<table class="table table-striped table-bordered table-dark table-responsive-sm" style="margin-bottom: 137px">
		<thead>
			<tr>
				<th>ID</th>
				<th>Username</th>
				<th>Password</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let user of usersList; let i = index">
				<td>{{ user.uid }}</td>
				<td (mouseover)='hoverIndex=i' (mouseleave)='hoverIndex=-1'>
					{{user.name}}
					<div class='dropdown' [style.display]='hoverIndex==i?"block":"none"'>
						<table>
							<tr>
								<td>
									<input value='{{user.name}}'>
								</td>
							</tr>
							<tr>
								<td>
									<input value='*********'>
								</td>
							</tr>
							
							<tr>
								<td (click)='updateUser($event, i)' style='background: green'>
									Save
								</td>
							</tr>
						</table>
					</div>
				</td>
				<td>
					<!-- {{user.password}} -->
					*********
				</td>
				<td>
					<button class="btn btn-sm" (click)='deleteUser(i)'>X</button>
				</td>
			</tr>
		</tbody>
	</table>
	<table class="table table-striped table-bordered table-dark table-responsive-sm fixed-bottom" style="margin-bottom: 0;">
		<thead>
			<tr>
				<th>Username</th>
				<th>Password</th>
				<th>Create</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>
					<textarea class='form-control' placeholder="Username"></textarea>
				</td>
				<td>
					<textarea class='form-control' placeholder="Password"></textarea>
				</td>
				<td>
					<button class="btn btn-sm" (click)='pushUser($event)'>Create</button>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<div [style.display]="show_o_e_v?'unset':'none'">
	<div class="upload-btn-wrapper">
		<button class="btn">Upload a file</button>
		<input type="file" name="myfile" />
	</div>
	<p>
		File format:
	</p>
	<p>
		event1_name, event1_datetime, event1_quota, event1_location, event1_type
	</p>
	<p>
		event2_name, event2_datetime, event2_quota, event2_location, event2_type
	</p>
	<p>
		etc...
	</p>
</div>
<router-outlet></router-outlet>